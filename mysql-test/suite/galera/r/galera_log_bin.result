RESET MASTER;
RESET MASTER;
CREATE TABLE t1 (id INT PRIMARY KEY) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1);
CREATE TABLE t2 (id INT) ENGINE=InnoDB;
INSERT INTO t2 VALUES (1);
INSERT INTO t2 VALUES (1);
SELECT COUNT(*) = 1 FROM t1;
COUNT(*) = 1
1
SELECT COUNT(*) = 2 FROM t2;
COUNT(*) = 2
1
ALTER TABLE t1 ADD COLUMN f2 INTEGER;
FLUSH LOGS;
SHOW BINLOG EVENTS IN '0.000001' FROM 123;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
0.000001	123	Previous_gtids	1	154	
0.000001	154	Anonymous_Gtid	1	219	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	219	Query	1	343	use `test`; CREATE TABLE t1 (id INT PRIMARY KEY) ENGINE=InnoDB
0.000001	343	Anonymous_Gtid	1	408	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	408	Query	1	485	BEGIN
0.000001	485	Table_map	1	530	table_id: # (test.t1)
0.000001	530	Write_rows	1	570	table_id: # flags: STMT_END_F
0.000001	570	Xid	1	601	COMMIT /* xid=# */
0.000001	601	Anonymous_Gtid	1	666	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	666	Query	1	778	use `test`; CREATE TABLE t2 (id INT) ENGINE=InnoDB
0.000001	778	Anonymous_Gtid	1	843	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	843	Query	1	920	BEGIN
0.000001	920	Table_map	1	965	table_id: # (test.t2)
0.000001	965	Write_rows	1	1005	table_id: # flags: STMT_END_F
0.000001	1005	Xid	1	1036	COMMIT /* xid=# */
0.000001	1036	Anonymous_Gtid	1	1101	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	1101	Query	1	1178	BEGIN
0.000001	1178	Table_map	1	1223	table_id: # (test.t2)
0.000001	1223	Write_rows	1	1263	table_id: # flags: STMT_END_F
0.000001	1263	Xid	1	1294	COMMIT /* xid=# */
0.000001	1294	Anonymous_Gtid	1	1359	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	1359	Query	1	1469	use `test`; ALTER TABLE t1 ADD COLUMN f2 INTEGER
0.000001	1469	Rotate	1	1508	0.000002;pos=4
SELECT COUNT(*) = 2 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 't1';
COUNT(*) = 2
1
SHOW BINLOG EVENTS IN '0.000001' FROM 123;
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
0.000001	123	Previous_gtids	2	154	
0.000001	154	Anonymous_Gtid	1	219	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	219	Query	1	343	use `test`; CREATE TABLE t1 (id INT PRIMARY KEY) ENGINE=InnoDB
0.000001	343	Anonymous_Gtid	1	408	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	408	Query	1	476	BEGIN
0.000001	476	Table_map	1	521	table_id: # (test.t1)
0.000001	521	Write_rows	1	561	table_id: # flags: STMT_END_F
0.000001	561	Xid	1	592	COMMIT /* xid=# */
0.000001	592	Anonymous_Gtid	1	657	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	657	Query	1	769	use `test`; CREATE TABLE t2 (id INT) ENGINE=InnoDB
0.000001	769	Anonymous_Gtid	1	834	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	834	Query	1	902	BEGIN
0.000001	902	Table_map	1	947	table_id: # (test.t2)
0.000001	947	Write_rows	1	987	table_id: # flags: STMT_END_F
0.000001	987	Xid	1	1018	COMMIT /* xid=# */
0.000001	1018	Anonymous_Gtid	1	1083	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	1083	Query	1	1151	BEGIN
0.000001	1151	Table_map	1	1196	table_id: # (test.t2)
0.000001	1196	Write_rows	1	1236	table_id: # flags: STMT_END_F
0.000001	1236	Xid	1	1267	COMMIT /* xid=# */
0.000001	1267	Anonymous_Gtid	1	1332	SET @@SESSION.GTID_NEXT= 'ANONYMOUS'
0.000001	1332	Query	1	1442	use `test`; ALTER TABLE t1 ADD COLUMN f2 INTEGER
DROP TABLE t1;
DROP TABLE t2;
